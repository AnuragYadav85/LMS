{% extends "base.html" %}
{% block content %}

<h3 class="text-center mb-4">Monthly Excel Report Preview</h3>
<div class="card shadow-sm mb-4">
    <div class="card-header bg-dark text-white">
        Employee Details (Preview)
    </div>
    <div class="card-header bg-primary text-white">
        Leave Remaining (Preview)
    </div>
    <div class="card-body p-0">
        <table class="table table-bordered table-sm text-center mb-0">
            <thead class="table-secondary">
                <tr>
                    <th>Sick Leave</th>
                    <th>Casual Leave</th>
                    <th>Compensation Off</th>
                    <th>Summer Vacation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>5</td>
                    <td>8</td>
                    <td>2</td>
                    <td>10</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="card shadow-sm mb-4">
    <div class="card-header bg-warning">
        Leave Applied (Last 30 Days – Preview)
    </div>
    <div class="card-body p-0">
        <table class="table table-bordered table-sm text-center mb-0">
            <thead class="table-secondary">
                <tr>
                    <th>Leave Type</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Sick Leave</td>
                    <td>2026-01-20</td>
                    <td>2026-01-21</td>
                    <td class="text-success fw-bold">Approved</td>
                </tr>
                <tr>
                    <td>Casual Leave</td>
                    <td>2026-01-10</td>
                    <td>2026-01-10</td>
                    <td class="text-warning fw-bold">Pending</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-7">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-success text-white">
                Attendance (Last 30 Days – Preview)
            </div>
            <div class="card-body p-0">
                <table class="table table-bordered table-sm text-center mb-0">
                    <thead class="table-secondary">
                        <tr>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Check-in</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2026-01-25</td>
                            <td>Present</td>
                            <td>09:02</td>
                        </tr>
                        <tr>
                            <td>2026-01-24</td>
                            <td>Absent</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>2026-01-23</td>
                            <td>Late</td>
                            <td>09:20</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-md-7">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-success text-white">
                Attendance (Last 30 Days – Preview)
            </div>
            <div class="card-header  p-0">
                <table class="table table-bordered table-sm text-center mb-0">
                    <thead class="table-secondary">
                        <tr>
                            <th>Status</th>
                            <th>Count</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Present</td>
                            <td>40</td>
                        </tr>
                        <tr>
                            <td>Absent</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>Late</td>
                            <td>5</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-md-5">
        <div class="card shadow-sm h-100">
            <div class="card-header bg-success text-white text-center">
                Attendance Chart
            </div>
            <div class="card-body">
                <canvas id="attendanceChart"></canvas>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <a href="/download_report_self"
           class="btn btn-success btn-lg w-100">
            Download Full Excel Report
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('attendanceChart');

new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Present', 'Absent', 'Late', 'Weekly Off', 'Duty Leave'],
        datasets: [{
            data: [40, 10, 5, 8, 2],
            backgroundColor: [
                '#28a745',
                '#dc3545',
                '#ffc107',
                '#17a2b8',
                '#6f42c1'
            ]
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'bottom'
            }
        }
    }
});
</script>

{% endblock %}